Wuxt - сконфигурированный Nuxt 3
==================================

Цели этого шаблона:

1.  Сделать Nuxt менее магическим, отключив функцию автоимпорта для компонентов, композаблов и другого кода, который пишет разработчик приложения.
2.  Разделить фронтенд и сервер, переместив весь код, предназначенный только для фронтенда, в директорию `app`, по аналогии с директорией `server`. Общие каталоги остаются в корневом каталоге. Читайте [этот](https://github.com/Nuxt/Nuxt/discussions/20251#discussion-5082086) пропозал Nuxt.
3.  Сделать возможной организацию кода не по его роли (composables, components и т.д.), а как отдельных модулей (возможно использовать любой паттерн) с помощью [public api](https://feature-sliced.design/docs/reference/public-api).
4.  Преднастроить некоторые базовые модули Nuxt:
    * **Nuxt content** для документов, блогов и прочего markdown контента.
    * **Unocss** со всеми необходимыми пресетами и трансформерами.
    * **Pinia** для работы со стейтом.
    * SSR-френдли темы на основе cookies с помощью **vueuse**.
    * I18n с **Nuxt/i18n**.
    * Unit и компонентное тестирование с помощью **vitest**, **vue-test-utils**, **nuxt-test-utils**.
    * Линтинг и форматирование кода с помощью **Antfu ESLint config.**.

Зачем?
---

Разработка средних и больших приложений с использованием файловой структуры предлагаемой Nuxt - это нормально. _**НО**_

**Каждый созданный вами компонент становится глобально доступным**, и нет возможности создать модуль (без использования встроенной функции Nuxt modules), который изолирует свои собственные компоненты, composables и т.д., которые создаются исключительно для целей модуля. Например, вы можете создать модуль `<Calendar />`, включающий компонент `<CalendarButton />`, но вы не хотите, чтобы этот компонент был доступен для использования во всем приложении. Функция автоматического импорта компонентов Nuxt не позволит вам сделать это, если вы не отключите ее. Поэтому в этой конфигурации она отключена. Вместо того чтобы полагаться на магию Nuxt, **вы сами отвечаете за организацию кода проекта**, используя [public interfaces](https://feature-sliced.design/docs/reference/public-api). Читайте о [colocation](https://kentcdodds.com/blog/colocation) в блоге Kent C. Dodds.

Базовая структура каталогов Nuxt подталкивает разработчиков к [**группировке кода по его роли**](https://github.com/goldbergyoni/nodebestpractices/blob/master/sections/projectstructre/breakintcomponents.md). Компоненты, композаблы, утилиты, сторы - все должно быть помещено в определенный ролью каталог, чтобы быть доступным во всем приложении. Это плохая практика! Отключение автоимпорта для всего этого кода, написанного разработчиком, **побуждает вас организовать свою кодовую базу**. Это позволит вам реализовать самые разные шаблоны, от простой модульной архитектуры до чистой архитектуры.

**Конфигурировать модули с нуля каждый раз очень утомительно**. Модули Nuxt и конфиг Nuxt меняются не так часто, поэтому нет **необходимости каждый раз копаться в их документации, чтобы добиться одного и того же результата** при старте нового проекта.

### В: Nuxt file-based vue-router и Nitro?

О: Они остаются неизменными и работают как ожидается.

### В: Что насчет плагинов, модулей и middleware?

О: Клиентские и серверные плагины, middleware и модули Nuxt остались без изменений и ведут себя так, как ожидается в Nuxt.

Автоматическая регистрация работает, как ожидается. Однако, обратите внимание, что app и server имеют свои собственные плагины и промежуточные модули. В `app/plugins` регистрируются плагины Vue, а в `server/plugins` - плагины Nitro. То же самое относится и к middlewares - `app/middleware` для всей навигации на стороне клиента (маршруты на основе файлов, определенные в `app/pages`), но `server/middleware` для `server/{api,routes}`.

### В: Мне нужен автоимпорт "X".

О: Все еще есть возможность включить его в `nuxt.structure.ts`:

* Заполните пути к компонентам в массиве `components.dirs`.
* Заполните пути к utils, composables в массиве `imports.dirs`.
* Для автоимпорта Pinia сторов, заполните массив `pinia.storesDirs`.

Но имейте в виду, что Nuxt сканирует только файлы на верхнем уровне директории, которую вы указали в `imports.dirs` (composables, utils).

[Подробнее об автоимпортах на основе директорий](https://nuxt.com/docs/guide/concepts/auto-imports#directory-based-auto-imports)
